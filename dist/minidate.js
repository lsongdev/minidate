"use strict";function Date2(t){return this instanceof Date2?(this.date=Date2.from(t),this):new Date2(t)}Date2.from=function(t,e){var a,n=typeof t;switch(null===t&&(n="null"),t instanceof Date&&(n="date"),n){case"string":a=Date2.parse(t);break;case"number":a=new Date(t);break;case"object":e=e?"UTC":"",a=new Date(0),void 0!==t.year&&a["set"+e+"Year"](+t.year),void 0!==t.date&&a["set"+e+"Date"](+t.date),void 0!==t.month&&a["set"+e+"Month"](+t.month-1),void 0!==t.hour&&a["set"+e+"Hours"](+t.hour),void 0!==t.minute&&a["set"+e+"Minutes"](+t.minute),void 0!==t.second&&a["set"+e+"Seconds"](+t.second);break;case"null":case"undefined":a=new Date;break;default:a=new Date(t)}return a},Date2.parse=function(t){var e={},a={fullYear:1,year:2,month:3,date:4,time:5,hour:6,minute:7,second:8},n=/((\d{4})-(\d{2})-(\d{2}))?\s?((\d{2}):(\d{2}):(\d{2}))?/;if(~t.indexOf("GMT")){var r=t.split(/\W\D?/);e.year=r[3],e.month="xxanebarprayunulugepctovec".indexOf(r[2])/2,e.date=r[1],e.hour=r[4],e.minute=r[5],e.second=r[6];r[8]}else{if(~t.indexOf("T"))return new Date(t);if(!n.test(t))return Date(t);var o=n.exec(t);for(var s in a)e[s]=o[a[s]]}return Date2.from(e)},Date2.prototype.now=function(){return Date.now()},Date2.TIME_AGO={prefix:"",suffix:" ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},Date2.prototype.ago=function(){function t(t,e){return e=Math.abs(Math.round(e)),Date2.TIME_AGO[t]&&Date2.TIME_AGO[t].replace(/%d/i,e)}var e=(new Date-this.date)/1e3,a=e/60,n=a/60,r=n/24,o=r/30,s=r/365;return Date2.TIME_AGO.prefix+(e<45&&t("seconds",e)||e<90&&t("minute",1)||a<45&&t("minutes",a)||a<90&&t("hour",1)||n<24&&t("hours",n)||n<42&&t("day",1)||r<30&&t("days",r)||r<45&&t("month",1)||r<365&&t("months",o)||s<1.5&&t("year",1)||t("years",s))+Date2.TIME_AGO.suffix},Date2.prototype.offset=function(t){var e=+this.date;return this.date=new Date(e+t),this},Date2.prototype.addSeconds=function(t){return this.offset(1e3*t)},Date2.prototype.addMinutes=function(t){return this.addSeconds(60*t)},Date2.prototype.addHours=function(t){return this.addMinutes(60*t)},Date2.prototype.addDays=function(t){return this.addHours(24*t)},Date2.prototype.toString=function(t){if(void 0===t)return this.date.toString();var e={"M+":this.date.getMonth()+1,"d+":this.date.getDate(),"h+":this.date.getHours()%12==0?12:this.date.getHours()%12,"H+":this.date.getHours(),"m+":this.date.getMinutes(),"s+":this.date.getSeconds(),"q+":Math.floor((this.date.getMonth()+3)/3),S:this.date.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.date.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},module.exports=Date2;
